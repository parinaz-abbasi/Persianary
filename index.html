<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persianary</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Lobby Screen -->
    <div id="lobby" class="container">
        <h1>Persianary</h1>
        
        <!-- Initial Choice -->
        <div id="initialChoice" class="lobby-choice">
            <button id="createGameBtn" class="choice-btn">Create New Game</button>
            <button id="joinGameBtn" class="choice-btn">Join Existing Game</button>
        </div>
        
        <!-- Create Game Form -->
        <div id="createGameForm" style="display: none;">
            <h2>Create New Game</h2>
            <div class="lobby-form">
                <input type="text" id="createPlayerName" placeholder="Enter your name" maxlength="15">
                <button id="createRoomBtn">Create Room</button>
                <button id="backFromCreate" class="back-btn">Back</button>
            </div>
        </div>
        
        <!-- Join Game Form -->
        <div id="joinGameForm" style="display: none;">
            <h2>Join Game</h2>
            <div class="lobby-form">
                <input type="text" id="joinPlayerName" placeholder="Enter your name" maxlength="15">
                <input type="text" id="roomCodeInput" placeholder="Enter 4-letter code" maxlength="4" style="text-transform: uppercase;">
                <button id="joinRoomBtn">Join Room</button>
                <button id="backFromJoin" class="back-btn">Back</button>
            </div>
        </div>
        
        <!-- Waiting Room -->
        <div id="waitingRoom" style="display: none;">
            <h2>Room Code: <span id="currentRoom" style="color: #667eea; font-weight: bold;"></span></h2>
            
            <!-- Game Options -->
            <div id="gameOptions" class="game-options">
                <h3>Game Settings</h3>
                
                <div class="option-group">
                    <label>Language:</label>
                    <select id="languageSelect">
                        <option value="persian">Persian - فارسی</option>
                        <option value="english">English - انگلیسی</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label>Category:</label>
                    <select id="categorySelect">
                        <option value="easy">Easy - آسان</option>
                        <option value="medium">Medium - متوسط</option>
                        <option value="hard">Hard - سخت</option>
                        <option value="phrases">Phrases - اصطلاحات</option>
                        <option value="all">All Categories - همه</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label>Time per Round:</label>
                    <select id="timeSelect">
                        <option value="30">30 seconds</option>
                        <option value="60" selected>60 seconds</option>
                        <option value="90">90 seconds</option>
                        <option value="120">120 seconds</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label>Number of Rounds:</label>
                    <select id="roundsSelect">
                        <option value="10" selected>10 rounds</option>
                        <option value="11">11 rounds</option>
                        <option value="12">12 rounds</option>
                        <option value="13">13 rounds</option>
                        <option value="14">14 rounds</option>
                        <option value="15">15 rounds</option>
                    </select>
                </div>
            </div>
            
            <div class="teams-container">
                <div class="team">
                    <h3>Team 1</h3>
                    <ul id="team1List"></ul>
                </div>
                <div class="team">
                    <h3>Team 2</h3>
                    <ul id="team2List"></ul>
                </div>
            </div>
            
            <p id="playerCount">Waiting for players... (Minimum 4 needed)</p>
            <button id="startBtn" style="display: none;">Start Game</button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="container" style="display: none;">
        <div class="game-header">
            <h1>Persianary</h1>
            <div class="room-display">Room: <span id="gameRoomCode"></span></div>
        </div>
        
        <div class="game-info">
            <div id="wordDisplay">Word will appear here</div>
            <div id="timer">Time: 60s</div>
            <div id="drawerBanner" style="display:none; padding:8px; background:#fff7ed; border:1px solid #ffd591; border-radius:6px; margin-top:8px; font-weight:600; text-align:center; color:#ad6800;"></div>
        </div>
        <div style="margin:6px 0 12px 0; color:#444; font-size:14px;">Note: the drawer sees the full word; teammates see their team's drawing and guesses during the round. Other team drawings/guesses are revealed after the round.</div>
        
        <div class="game-layout">
            <div class="canvas-section">
                <canvas id="drawingCanvas"></canvas>
                
                <div class="tools">
                    <button id="clearBtn">Clear</button>
                    <input type="color" id="colorPicker" value="#000000">
                    <label>Brush:</label>
                    <input type="range" id="brushSize" min="1" max="20" value="5">
                </div>

                <div class="live-canvases" style="display:flex; gap:12px; margin-top:8px;">
                    <div style="text-align:center; flex:1;">
                        <div style="font-size:12px; color:#666; margin-bottom:6px;">Team 1 Live</div>
                        <canvas id="liveTeam1" width="420" height="300" style="border:1px solid #ddd; background:white; display:none; border-radius:6px;"></canvas>
                    </div>
                    <div style="text-align:center; flex:1;">
                        <div style="font-size:12px; color:#666; margin-bottom:6px;">Team 2 Live</div>
                        <canvas id="liveTeam2" width="420" height="300" style="border:1px solid #ddd; background:white; display:none; border-radius:6px;"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="chat-section">
                <div id="guesses" class="guesses-list"></div>
                <div class="guess-input">
                    <input type="text" id="guessInput" placeholder="Type your guess...">
                    <button id="guessBtn">Send</button>
                </div>
                    <div style="margin-top:12px; text-align:center;">
                        <button id="continueBtn" style="display:none; padding:10px 16px; background:#667eea; color:#fff; border:none; border-radius:8px; cursor:pointer;">Next Round (Host)</button>
                    </div>
                </div>
        </div>
        
        <!-- Replay / Reveal area (hidden until end of round) -->
        <div id="replaySection" style="display:none; margin-top:20px;">
            <h3>Round Reveal</h3>
            <div style="display:flex; gap:20px;">
                <div style="flex:1; text-align:center;">
                    <h4>Team 1 Drawing</h4>
                    <canvas id="replayTeam1" width="400" height="250" style="border:1px solid #ddd; background:white;"></canvas>
                </div>
                <div style="flex:1; text-align:center;">
                    <h4>Team 2 Drawing</h4>
                    <canvas id="replayTeam2" width="400" height="250" style="border:1px solid #ddd; background:white;"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="words.js"></script>
    <script src="script.js"></script>
</body>
</html>